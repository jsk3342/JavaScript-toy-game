<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>끝말잇기</title>
    <link rel="stylesheet" href="word.css" />
  </head>

  <body>
    <header class="header">
      <h1 class="header-title">끝말잇기 게임</h1>
    </header>
    <main class="main">
      <h2 class="main-title"><span id="order">1</span> 번째 참가자</h2>
      <p class="main-sub">제시어: <span id="word">미정</span></p>
      <input placeholder="입력해 주세요" type="text" />
      <div class="control-btn">
        <button type="button" class="start-btn">
          <img src="./src/start-disabled.png" alt="start" />
        </button>
        <button type="button" class="clear-btn">
          <img src="./src/reset-disabled.png" alt="reset" />
        </button>
      </div>
    </main>

    <script>
      //코드 구현 부분
      const num = Number(prompt("몇 명이서 시작 할까요?"));
      const $order = document.querySelector("#order");
      const $input = document.querySelector("input");
      const $start = document.querySelector(".start-btn");
      const $clear = document.querySelector(".clear-btn");
      const $word = document.querySelector("#word");
      //console.log($order.textContent)
      //console.log($order.innerHTML)
      //console.log($order.innerText)
      let word; //제시어
      let newWord; //새로 입력한 단어

      word = $input.innerText;

      const onClickButton = () => {
        if (!word) {
          word = newWord; //데이터를 바꾸고 화면을 구현해줘야 한다.
          $word.innerText = word; //미정값을 입력어로 변경하여 출력
          $input.value = ""; //값을 넘기고 인풋창 초기화
          $input.focus()
          const order = parseInt($order.textContent); //다음사람에게 순서를 넘기기 위해 저장
          if (order + 1 > num) {
            $order.textContent = 1;
          } else {
            $order.textContent = order + 1;
          }
        } else {
          //제시어가 있는 경우 올바른 단어인지 판단하기
          if (word[word.length - 1] === newWord[0]) {
            //올바르면
            word = newWord; //데이터를 바꾸고 화면을 구현해줘야 한다.
            $word.innerText = word; //미정값을 입력어로 변경하여 출력
            $input.value = ""; //값을 넘기고 인풋창 초기화
            $input.focus()
            const order = parseInt($order.textContent); //다음사람에게 순서를 넘기기 위해 저장
            if (order + 1 > num) {
              $order.textContent = 1;
            } else {
              $order.textContent = order + 1;
            }
          } else {
            console.log('오류')
          }
        }
      };

      const onInput = event => {
        newWord = event.target.value;
        console.log(newWord);
      };

      $start.addEventListener("click", onClickButton);
      $input.addEventListener("input", onInput);
    </script>
  </body>
</html>
